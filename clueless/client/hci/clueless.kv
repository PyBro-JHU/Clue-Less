#:kivy 1.0
#:import kivy kivy
#:import WipeTransition kivy.uix.screenmanager.WipeTransition
                
<StartScreen>:
    username: user_name
    suspect: suspect_selected
    
    canvas:
        Color:
            rgb: 0, 0, 0
    GridLayout:
        cols: 2
        rows: 1
        row_force_default: True
        row_default_height: 250
        Image:
            size_hint: 1, 1
            source: 'resources/pyBro_logo.png'
        GridLayout:
            cols: 2
            row_force_default: True
            row_default_height: 35
            padding: '20dp'
            spacing: '10dp'
            Label:
                size_hint: 1, 1
                text: 'Username'
            TextInput:
                id: user_name
                multiline: False
                size_hint: 1, 1
                text: 'TestUser'
            Label:
                text: 'Select Suspect:'
            Spinner:
                id: suspect_selected
                size_hint_y: None
                height: 34
                text: 'Miss Scarlet'
                values: 'Miss Scarlet', 'Colonel Mustard', 'Professor Plum', 'Mr. Green', 'Mrs. White', 'Mrs. Peacock'
            #Label:
            #    text: 'Enter Game Name:'
            #TextInput:
            #    id: game_name
            #    multiline: False
            #    size_hint: 1, 1
            #    text: 'Game1'
            #Label:
            #    text: 'Or join an Existing Game'
            #Label:
            #    text: ''
            #Label:
            #    text: 'Select Game:'
            #Spinner:
            #    size_hint_y: None
            #    height: 34
            #    text: ''
            #    values: 'Game Name 1', 'Game Name 2'
            Label:
                text: ''                
            Label:
                text: ''                
            Button:
                size_hint_y: None
                height: 34
                text: 'Play!'
                #on_release: root.manager.current = root.manager.next()
                on_release: root.register_player()

<GameScreen>:
    gameboard: gameboard
    controls: controls
    
    canvas:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            source: 'resources/background.jpg'
            size: self.size

    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            padding: '10dp'
            spacing: '10dp'
            size_hint: 1, None
            pos_hint: {'top': 1}
            height: '44dp'
            Image:
                size_hint: None, None
                size: '24dp', '24dp'
                source: 'resources/pyBro_logo.png'
                mipmap: True
            Label:
                height: '24dp'
                text_size: self.width, None
                color: (1, 1, 1, .8)
                text: 'PyBro - Clue-less %s' % '0.1.0'
            Button:
                size_hint_x: None
                width: 60
                text: 'Help'
            Button:
                size_hint_x: None
                width: 60
                text: 'Quit'
                on_release: root.manager.current = root.manager.previous()

        BoxLayout:
            orientation: 'horizontal'
            Gameboard:
                id: gameboard
                size_hint: 1, 1
            ControlPanel:
                id: controls

<GamePiece>:
    size: 15, 15
            
<GameTile>
    background_down: 'resources/pyBro_logo.png'
    center: self.center

<Gameboard>:
    scarlet: red_icon
    mustard: yellow_icon
    plum: purple_icon
    green: green_icon
    white: white_icon
    peacock: blue_icon
    
    study: study_0
    study_hall: hallway_1
    hall: hall_2
    hall_lounge: hallway_3
    lounge: lounge_4
    study_library: hallway_5
    study_billiard: secret_passage_6
    hall_billiard: hallway_7
    lounge_billiard: secret_passage_8
    lounge_dining: hallway_9
    library: library_10
    library_billiard: hallway_11
    billiard_room: billiard_room_12
    billiard_dining: hallway_13
    dining_room: dining_room_14
    library_conservatory: hallway_15
    conservatory_billiard: secret_passage_16
    billiard_ballroom: hallway_17
    kitchen_billiard: secret_passage_18
    dining_kitchen: hallway_19
    conservatory: conservatory_20
    conservatory_ballroom: hallway_21
    ballroom: ballroom_22
    ballroom_kitchen: hallway_23
    kitchen: kitchen_24
    
    GridLayout:
        cols: 5
        GameTile:
            id: study_0
            background_normal: 'resources/study.png'
            on_release: root.debug()
        GameTile:
            id: hallway_1
            background_normal: 'resources/hallway_horizontal.png'
        GameTile:
            id: hall_2
            background_normal: 'resources/hall.png'
        GameTile:
            id: hallway_3
            background_normal: 'resources/hallway_horizontal.png'
        GameTile:
            id: lounge_4
            background_normal: 'resources/lounge.png'
        GameTile:
            id: hallway_5
            background_normal: 'resources/hallway_vertical.png'
        GameTile:
            id: secret_passage_6
            background_normal: 'resources/pyBro_logo-gray.jpg'
        GameTile:
            id: hallway_7
            background_normal: 'resources/hallway_vertical.png'
        GameTile:
            id: secret_passage_8
            background_normal: 'resources/pyBro_logo-gray.jpg'
        GameTile:
            id: hallway_9
            background_normal: 'resources/hallway_vertical.png'
        GameTile:
            id: library_10
            background_normal: 'resources/library.png'
        GameTile:
            id: hallway_11
            background_normal: 'resources/hallway_horizontal.png'
        GameTile:
            id: billiard_room_12
            background_normal: 'resources/billiards_room.png'
        GameTile:
            id: hallway_13
            background_normal: 'resources/hallway_horizontal.png'
        GameTile:
            id: dining_room_14
            background_normal: 'resources/dining_room.png'
        GameTile:
            id: hallway_15
            background_normal: 'resources/hallway_vertical.png'
        GameTile:
            id: secret_passage_16
            background_normal: 'resources/pyBro_logo-gray.jpg'
        GameTile:
            id: hallway_17
            background_normal: 'resources/hallway_vertical.png'
        GameTile:
            id: secret_passage_18
            background_normal: 'resources/pyBro_logo-gray.jpg'
        GameTile:
            id: hallway_19
            background_normal: 'resources/hallway_vertical.png'
        GameTile:
            id: conservatory_20
            background_normal: 'resources/conservatory.png'
        GameTile:
            id: hallway_21
            background_normal: 'resources/hallway_horizontal.png'
        GameTile:
            id: ballroom_22
            background_normal: 'resources/ballroom.png'
        GameTile:
            id: hallway_23
            background_normal: 'resources/hallway_horizontal.png'
        GameTile:
            id: kitchen_24
            background_normal: 'resources/kitchen.png'
            
    GamePiece:
        id: white_icon
        canvas:
            Color:
                rgb: 1, 1, 1
            Ellipse:
                pos: self.pos
                size: 15, 15
    GamePiece:
        id: red_icon
        canvas:
            Color:
                rgb: 1, 0, 0
            Ellipse:
                pos: self.pos
                size: 15, 15
    GamePiece:
        id: yellow_icon
        canvas:
            Color:
                rgb: 1, 1, 0
            Ellipse:
                pos: self.pos
                size: 15, 15
    GamePiece:
        id: purple_icon
        canvas:
            Color:
                rgb: 1, 0, 1
            Ellipse:
                pos: self.pos
                size: 15, 15
    GamePiece:
        id: green_icon
        canvas:
            Color:
                rgb: 0, 1, 0
            Ellipse:
                pos: self.pos
                size: 15, 15
    GamePiece:
        id: blue_icon
        canvas:
            Color:
                rgb: 0, 0, 1
            Ellipse:
                pos: self.pos
                size: 15, 15
    
<ControlPanel>:
    notifications: notification_text
    notepad: notepad_input
    suggest: suggest_button
    accuse: accuse_button
    end_turn: end_turn_button
    
    BoxLayout:
        orientation: 'vertical'
        padding: 5
        spacing: 5

        Label:
            size_hint_y: 0.1
            pos_hint: {'x': 1}
            text: 'Notifications'
                
        TextInput:
            id: notification_text
            size_hint_y: 1.5
            pos_hint: {'x': 1}
        
        Label:
            size_hint_y: 0.1
            pos_hint: {'x': 1}
            text: 'Detective Notebook'
             
        TextInput:
            id: notepad_input
            size_hint_y: 1.5
            pos_hint: {'x': 1}

        BoxLayout:
            orientation: 'horizontal'
            pos_hint: {'x': 1}
            padding: 5
            spacing: 5
            DisableButton:
                id: suggest_button
                text: 'Suggest'
                on_release: root.suggest_popup()
            DisableButton:
                id: accuse_button
                text: 'Accuse'
                on_release: root.accuse_popup()
            DisableButton:
                id: end_turn_button
                text: 'End Turn'

<AccusationPopup>:
    suspect: suspect
    room: room
    weapon: weapon
    
    auto_dismiss: False
    title: 'Accusation'
    size_hint: None, None
    size: '500dp', '300dp'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Select a Suspect, Room, and Weapon to make an Accusation.'
        BoxLayout:
            orientation: 'horizontal'
            padding: 5
            spacing: 5
            Spinner:
                id: suspect
                size_hint_y: None
                height: 34
                text: 'Suspect'
                values: 'Miss Scarlet', 'Colonel Mustard', 'Professor Plum', 'Mr. Green', 'Mrs. White', 'Mrs. Peacock'
            Spinner:
                id: room
                size_hint_y: None
                height: 34
                text: 'Room'
                values: 'Study', 'Hall', 'Lounge', 'Library', 'Billiard Room', 'Dining Room', 'Conservatory', 'Ballroom', 'Kitchen'
            Spinner:
                id: weapon
                size_hint_y: None
                height: 34
                text: 'Weapon'
                values: 'Rope', 'Lead Pipe', 'Knife', 'Wrench', 'Candlestick', 'Revolver'
        BoxLayout:
            orientation: 'horizontal'
            padding: 5
            spacing: 5
            Button:
                text: 'Make Accusation'
                size_hint_y: None
                height: '50sp'
                on_release: root.confirm_popup()
            Button:
                text: 'Cancel'
                size_hint_y: None
                height: '50sp'
                on_release: root.dismiss()
                    
<SuggestionPopup>:
    suspect: suspect
    weapon: weapon
    
    auto_dismiss: False
    title: 'Suggestion'
    size_hint: None, None
    size: '500dp', '300dp'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Select a Suspect and Weapon to make a Suggestion.'
        BoxLayout:
            orientation: 'horizontal'
            padding: 5
            spacing: 5
            Spinner:
                id: suspect
                size_hint_y: None
                height: 34
                text: 'Suspect'
                values: 'Miss Scarlet', 'Colonel Mustard', 'Professor Plum', 'Mr. Green', 'Mrs. White', 'Mrs. Peacock'
            Spinner:
                id: weapon
                size_hint_y: None
                height: 34
                text: 'Weapon'
                values: 'Rope', 'Lead Pipe', 'Knife', 'Wrench', 'Candlestick', 'Revolver'
        BoxLayout:
            orientation: 'horizontal'
            padding: 5
            spacing: 5
            Button:
                text: 'Make Suggestion'
                size_hint_y: None
                height: '50sp'
                on_release: root.dismiss()
            Button:
                text: 'Cancel'
                size_hint_y: None
                height: '50sp'
                on_release: root.dismiss()
                    